<h1>Mode : OnPush üõ°Ô∏è</h1>

<p class="info-text">
  OnPush optimise la d√©tection : le composant ne se met √† jour QUE si ses &#64;Input changent, un event interne se d√©clenche, ou un Observable √©met.
</p>

<div class="layout-container">
  
  <!-- COLONNE GAUCHE : SAPIN -->
  <div class="tree-display">
    <app-tree-default style="position:fixed"></app-tree-default>
  </div>
  

  <!-- COLONNE DROITE : LES 5 TESTS -->
  <div class="tests-panel">
    
    <!-- TEST 1 : setInterval -->
    <div class="test-card test-fail">
      <h3>1Ô∏è‚É£ setInterval() <span class="badge fail">‚ùå Ne fonctionne PAS</span></h3>
      <p>Un compteur qui s'incr√©mente automatiquement toutes les 2 secondes.</p>
      <div class="counter-display frozen">{{ setIntervalCounter }}</div>
      <small>‚ö†Ô∏è Zone.js d√©clenche une CD globale, MAIS ce composant OnPush n'est pas marqu√© pour mise √† jour !</small>
    </div>

    <!-- TEST 2 : addEventListener -->
    <div class="test-card test-fail">
      <h3>2Ô∏è‚É£ addEventListener() <span class="badge fail">‚ùå Ne fonctionne PAS</span></h3>
      <p>Bougez la souris dans la zone orange :</p>
      <div id="mouseZone" class="mouse-zone">
        üñ±Ô∏è Zone de d√©tection
      </div>
      <div class="counter-display frozen">{{ mouseCounter }}</div>
      <small>‚ö†Ô∏è Zone.js d√©tecte l'event, mais le composant OnPush n'est pas v√©rifi√© !</small>
    </div>

    <!-- TEST 3 : Observable -->
    <div class="test-card test-success">
      <h3>3Ô∏è‚É£ Observable <span class="badge fail">‚ùå Fonctionne</span></h3>
      <p>Un Observable √©met automatiquement toutes les 5 secondes.</p>
      <div class="counter-display">{{ fetchCounter }}</div>
      <small>‚úÖ Zone.js intercepte les observables ‚Üí CD automatique m√™me sans event utilisateur !</small>
    </div>

    <!-- TEST 4 : Event Template -->
    <div class="test-card test-success">
      <h3>4Ô∏è‚É£ Event Template <span class="badge success">‚úÖ Fonctionne</span></h3>
      <button (click)="handleClick()" class="btn-primary">Cliquer ici</button>
      <div class="counter-display">{{ clickCounter }}</div>
      <small>‚úÖ Les events internes au composant d√©clenchent la CD en OnPush !</small>
    </div>

    <!-- TEST 5 : Signal -->
    <div class="test-card test-success">
      <h3>5Ô∏è‚É£ Signal <span class="badge success">‚úÖ Fonctionne</span></h3>
      <button (click)="incrementSignal()" class="btn-primary">Incr√©menter Signal</button>
      <div class="counter-display">{{ signalCounter() }}</div>
      <small>‚úÖ Les signals fonctionnent en OnPush (r√©activit√© fine) !</small>
    </div>

  </div>
</div>
